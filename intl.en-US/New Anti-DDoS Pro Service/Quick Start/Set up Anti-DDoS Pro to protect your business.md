# Set up Anti-DDoS Pro to protect your business {#concept_oqc_ysb_kgb .concept}

After you purchase Anti-DDoS Pro instances, you need to set up your instances to protect your business.

You can set up Anti-DDoS Pro instances by using one of the following methods:

-   [Set up Anti-DDoS Pro instances using domains](#section_x4h_ztb_kgb)
-   [Set up Anti-DDoS Pro instances using IPs and ports](#section_chb_zwb_kgb)

## Set up Anti-DDoS Pro instances using domains {#section_x4h_ztb_kgb .section}

1.  Log on to the [Anti-DDoS Pro console](https://yundunnext.console.aliyun.com/?p=ddoscoo#/report).

    In the left-side navigation pane, choose **Management** \> **Instances** to view your Anti-DDoS Pro instances.

    ![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/79685/155411498636654_en-US.png)

2.  Choose **Management** \> **Websites** and click **Add Domain**.

    **Note:** To set up Anti-DDoS Pro instances to protect your business, you only need to configure your domain in the Anti-DDoS Pro console.

3.  You need to configure the following parameters:

    ![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/79685/155411498636657_en-US.png)

    |Parameter|Description|
    |---------|-----------|
    |Domain|Enter the domain name of your website.|
    |Protocol|Select the protocols supported by your website. By default, HTTP and HTTPS are selected.**Note:** If your website supports HTTPS encrypted connections, you must select HTTPS. Select other protocols if applicable.

|
    |Server Address|Select the address type of the origin server and specify the address.    -   If Origin Server IP is selected, you can enter up to 20 IP addresses. When multiple origin server IPs are specified, Anti-DDoS Pro uses IP hash load balancing to forward traffic back to the origin server.
    -   If you want to use Anti-DDoS Pro and WAF together for enhanced protection, you can select Origin Server Domain and enter the CNAME provided by your WAF instance.
|
    |Server Port/Forwarding Port|The system automatically sets the ports based on the protocols you have selected. You cannot modify these parameters.    -   When HTTP or Websocket is selected, the port of the origin server is 80 by default.
    -   When HTTPS or Websockets is selected, the port of the origin server is 443 by default.
The forwarding port is the same as the port of the origin server.|
    |Select Anti-DDoS Pro Instance|Select Anti-DDoS Pro instances based on your needs.**Note:** For each domain, you can select up to eight Anti-DDoS Pro instances.

|

4.  Click **Add** to go to the Modify DNS Records page. Change the DNS records of your domain to forward incoming traffic to the IP addresses of selected Anti-DDoS Pro instances.

    **Note:** Anti-DDoS Pro currently does not generate CNAME records. After you verify that Anti-DDoS Pro instances can forward traffic to the origin server, you need to change A record values to the IP addresses of these Anti-DDoS instances through your DNS provider. This forwards incoming traffic to these Anti-DDoS Pro instances.

    Before you modify DNS records to forward incoming traffic to Anti-DDoS Pro, we recommend that you verify that Anti-DDoS Pro instances can forward traffic back to your origin server. For more information about testing domain configurations, see [Test domain configurations](../../../../../intl.en-US/Anti-DDoS Pro Service/Quick Start/Web service/Step 3. Verify local settings.md#).

5.  Click **Next** to view the back-to-origin IP addresses that Anti-DDoS Pro instances use to forward traffic back to the origin server.

    If you are using additional firewalls to protect the origin server, disable the firewalls or add the back-to-origin IP addresses used by Anti-DDoS Pro instances to the whitelist. After you forward incoming traffic to Anti-DDoS Pro, Anti-DDoS Pro instances filter your traffic and use these back-to-origin IP addresses to forward traffic back to the origin server. If you do not add these back-to-origin IP addresses to the whitelists of your firewalls, your traffic may be mistakenly blocked, causing service interruptions.


After you add a domain to Anti-DDoS Pro, the system automatically generates forwarding rules for the Anti-DDoS Pro instances you have selected. Your traffic is forwarded based on these rules.

-   If the forwarding port is 80, the system automatically generates a rule that forwards traffic on TCP port 80 to the origin server. The rule is not generated if the same rule already exists.
-   If the forwarding port is 443, the system automatically generates a rule that forwards traffic on TCP port 443 to the origin server. The rule is not generated if the same rule already exists.

You cannot edit or delete rules that are automatically generated by the system. These rules are automatically deleted when the domains to which these rules apply are no longer associated with the Anti-DDoS Pro instances.

You can create rules to forward traffic on TCP port 80 or 443 only when these rules are automatically deleted from the Anti-DDoS Pro instances.

## Set up Anti-DDoS Pro instances using IPs and ports {#section_chb_zwb_kgb .section}

1.  Log on to the [Anti-DDoS Pro console](https://yundunnext.console.aliyun.com/?p=ddoscoo#/report).

    In the left-side navigation pane, choose **Management** \> **Instances** to view your Anti-DDoS Pro instances.

2.  Choose **Management** \> **Port Settings**, select an Anti-DDoS Pro instance, and click **Create Rule**.

    **Note:** To set up Anti-DDoS Pro instances to protect your business, you only need to configure forwarding rules in the Anti-DDoS Pro console.

3.  You need to configure the following parameters:

    ![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/79685/155411498636742_en-US.png)

    |Parameter|Description|
    |---------|-----------|
    |Forwarding Protocol|Specify the forwarding protocol used by the origin server. Valid values: TCP and UDP.|
    |Forwarding Port|Specify the port that the Anti-DDoS Pro instance uses to forward traffic.**Note:** We recommend that you keep the forwarding port the same as the port of the origin server.

|
    |Origin Server Port|Specify the port of the origin server.|
    |Origin Server IP|Specify the IP address of the origin server.**Note:** You can enter up to 20 IP addresses for load balancing.

|

4.  Click **Complete**.

    After a forwarding rule is generated, you can configure session persistence, health check, and Anti-DDoS protection policies based on your needs. For more information, see documents on [session persistence](../../../../../intl.en-US/Anti-DDoS Pro Service/User Guide/Layer-4 Protection Settings/Session persistence settings for non-website services.md#), [health check](../../../../../intl.en-US/Anti-DDoS Pro Service/User Guide/Layer-4 Protection Settings/Health check settings for non-website service.md#), and [Anti-DDoS protection policies](../../../../../intl.en-US/Anti-DDoS Pro Service/User Guide/Layer-4 Protection Settings/DDoS defense police settings for non-website service.md#).

5.  Change the service IP to the IP address of the Anti-DDoS Pro instance. This forwards incoming traffic to Anti-DDoS Pro.

    Before you forward incoming traffic to Anti-DDoS Pro, we recommend that you verify that the Anti-DDoS Pro instance can forward traffic back to your origin server. For more information about testing port forwarding, see [Test forwarding rules](../../../../../intl.en-US/Anti-DDoS Pro Service/Quick Start/Non-Web service/Step 3. Verify local settings.md#).


